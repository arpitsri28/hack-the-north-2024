<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generate AI-Powered Anki Decks</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 2rem;
        background-color: #333;
        color: whitesmoke;
      }
      h1 {
        font-size: 2.5rem;
        margin-bottom: 1.5rem;
      }
      form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      input[type="text"],
      button {
        padding: 1rem;
        font-size: 1.2rem;
        border-radius: 10px;
        border: none;
        background: #444;
        color: whitesmoke;
      }
      button {
        background-color: #61dafb;
        cursor: pointer;
      }
      #drop-area {
        border: 2px dashed #61dafb;
        padding: 2rem;
        text-align: center;
        font-size: 1.2rem;
        border-radius: 10px;
        transition: background-color 0.3s ease;
      }
      #drop-area.dragging {
        background-color: #444;
      }
    </style>
  </head>
  <body>
    <h1>Generate AI-Powered Anki Decks!</h1>

    <form
      action="/upload"
      method="POST"
      enctype="multipart/form-data"
      id="upload-form"
    >
      <!-- Field to enter the name of the Anki deck -->
      <input
        type="text"
        name="deck_name"
        id="deck_name"
        placeholder="Enter deck name"
        required
      />

      <!-- Drag-and-drop area -->
      <div id="drop-area">
        <p>Drag and drop your .txt file here, or click to select a file</p>
        <input
          type="file"
          name="txt_file"
          id="txt_file"
          accept=".txt"
          hidden
          required
        />
      </div>

      <!-- Submit button -->
      <button type="submit">Submit</button>
    </form>

    <script>
      // Grab the drop area and file input elements
      const dropArea = document.getElementById("drop-area");
      const fileInput = document.getElementById("txt_file");

      // Prevent default behavior (Prevent file from being opened)
      ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
        dropArea.addEventListener(eventName, (e) => e.preventDefault());
        dropArea.addEventListener(eventName, (e) => e.stopPropagation());
      });

      // Highlight drop area when file is dragged over
      ["dragenter", "dragover"].forEach((eventName) => {
        dropArea.addEventListener(eventName, () => {
          dropArea.classList.add("dragging");
        });
      });

      ["dragleave", "drop"].forEach((eventName) => {
        dropArea.addEventListener(eventName, () => {
          dropArea.classList.remove("dragging");
        });
      });

      // Handle dropped files
      dropArea.addEventListener("drop", (e) => {
        const files = e.dataTransfer.files;
        fileInput.files = files; // Populate file input with dropped file
        dropArea.querySelector("p").textContent = files[0].name;
      });

      // Allow click on drop area to trigger file selection
      dropArea.addEventListener("click", () => fileInput.click());

      // Update drop area when file is selected via click
      fileInput.addEventListener("change", () => {
        const file = fileInput.files[0];
        if (file) {
          dropArea.querySelector("p").textContent = file.name;
        }
      });
    </script>
  </body>
</html>
